<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tailwind Override Test</title>
    <!-- Include Tailwind CSS like in the main app -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 800px;
            margin: 0 auto;
        }

        .test-row {
            margin: 15px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <div class="test-container">
        <h1>Tailwind CSS Override Test</h1>
        <p>This page tests if our <code>!important</code> styles can override Tailwind CSS classes.</p>

        <div class="test-row">
            <h3>Test 1: Button with Tailwind classes + our inline styles</h3>
            <button id="test1"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 text-sm font-medium leading-normal w-full bg-blue-500 text-white"
                style="background-color: #dcfce7 !important; color: #166534 !important; border: 2px solid #22c55e !important;">
                Oferta (should be green)
            </button>
            <p><small>This button has Tailwind classes for blue background but inline styles for green. Green should
                    win.</small></p>
        </div>

        <div class="test-row">
            <h3>Test 2: Dynamic style application</h3>
            <button id="test2"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 text-sm font-medium leading-normal w-full">
                Rozmowa telefoniczna
            </button>
            <button onclick="applyColors()" style="margin-left: 10px; padding: 5px 10px;">Apply Colors</button>
            <p><small>Click "Apply Colors" to see if our function can override any existing styles.</small></p>
        </div>

        <div class="test-row">
            <h3>Test 3: All status types</h3>
            <div id="statusTests"></div>
            <button onclick="generateAllStatusTests()" style="padding: 5px 10px;">Generate All Status Tests</button>
        </div>

        <div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 6px;">
            <h3>Debug Console</h3>
            <div id="debugOutput"
                style="background: #fff; border: 1px solid #ddd; padding: 10px; font-family: monospace; font-size: 12px; white-space: pre-wrap; max-height: 300px; overflow-y: auto;">
            </div>
        </div>
    </div>

    <script>
        // Copy the exact getStatusColors function from main.js (with !important)
        function getStatusColors(status) {
            const normalizedStatus = (status || '').trim().toLowerCase();

            const colorMap = {
                'wysłano cv': 'background-color: #dbeafe !important; color: #1e40af !important; border: 2px solid #3b82f6 !important;',
                'rozmowa telefoniczna': 'background-color: #dbeafe !important; color: #1e40af !important; border: 2px solid #3b82f6 !important;',
                'rozmowa online': 'background-color: #dbeafe !important; color: #1e40af !important; border: 2px solid #3b82f6 !important;',
                'rozmowa stacjonarna': 'background-color: #dbeafe !important; color: #1e40af !important; border: 2px solid #3b82f6 !important;',
                'assessment center': 'background-color: #fce7f3 !important; color: #be185d !important; border: 2px solid #ec4899 !important;',
                'oferta': 'background-color: #dcfce7 !important; color: #166534 !important; border: 2px solid #22c55e !important;',
                'odrzucono': 'background-color: #f3f4f6 !important; color: #374151 !important; border: 2px solid #6b7280 !important;'
            };

            if (colorMap[normalizedStatus]) {
                return colorMap[normalizedStatus];
            }

            if (normalizedStatus.includes('rozmowa')) {
                return 'background-color: #dbeafe !important; color: #1e40af !important; border: 2px solid #3b82f6 !important;';
            } else if (normalizedStatus.includes('assessment')) {
                return 'background-color: #fce7f3 !important; color: #be185d !important; border: 2px solid #ec4899 !important;';
            } else if (normalizedStatus.includes('oferta')) {
                return 'background-color: #dcfce7 !important; color: #166534 !important; border: 2px solid #22c55e !important;';
            } else if (normalizedStatus.includes('odrzucono')) {
                return 'background-color: #f3f4f6 !important; color: #374151 !important; border: 2px solid #6b7280 !important;';
            }

            return 'background-color: #f3f4f6 !important; color: #374151 !important; border: 2px solid #6b7280 !important;';
        }

        function log(message) {
            const output = document.getElementById('debugOutput');
            output.textContent += message + '\n';
            output.scrollTop = output.scrollHeight;
        }

        function applyColors() {
            const button = document.getElementById('test2');
            const statusText = button.textContent.trim();
            const styles = getStatusColors(statusText);

            log(`Applying colors to: "${statusText}"`);
            log(`Generated styles: ${styles}`);

            button.style.cssText = '';  // Clear existing styles
            button.setAttribute('style', styles);

            setTimeout(() => {
                const computed = window.getComputedStyle(button);
                log(`Computed background: ${computed.backgroundColor}`);
                log(`Computed color: ${computed.color}`);
                log(`Computed border: ${computed.border}`);
                log('---');
            }, 100);
        }

        function generateAllStatusTests() {
            const container = document.getElementById('statusTests');
            const statuses = [
                'Wysłano CV',
                'Rozmowa telefoniczna',
                'Rozmowa online',
                'Rozmowa stacjonarna',
                'Assessment Center',
                'Oferta',
                'Odrzucono'
            ];

            container.innerHTML = '';

            statuses.forEach(status => {
                const button = document.createElement('button');
                button.className = 'flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-8 px-4 text-sm font-medium leading-normal w-full bg-gray-500 text-white';
                button.textContent = status;
                button.style.cssText = getStatusColors(status);
                button.style.marginBottom = '10px';

                const wrapper = document.createElement('div');
                wrapper.style.marginBottom = '15px';
                wrapper.appendChild(button);

                const info = document.createElement('p');
                info.innerHTML = `<small><strong>${status}</strong>: ${getStatusColors(status)}</small>`;
                wrapper.appendChild(info);

                container.appendChild(wrapper);
            });

            log('Generated all status test buttons');
        }

        // Auto-run some tests when page loads
        window.addEventListener('load', () => {
            log('=== TAILWIND OVERRIDE TEST ===');
            log('Testing if !important styles can override Tailwind CSS');
            log('');

            const test1 = document.getElementById('test1');
            const computed1 = window.getComputedStyle(test1);
            log(`Test 1 computed background: ${computed1.backgroundColor}`);
            log(`Expected: rgb(220, 252, 231) (green)`);
            log(`Success: ${computed1.backgroundColor === 'rgb(220, 252, 231)'}`);
            log('');
        });
    </script>
</body>

</html>